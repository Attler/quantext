{% extends "base.html" %}
{% block content %}
<div class="container">
{% if not '+' in ngic %}

<h4>Visualisation for keyword <span class="text-success">{{ngic}}</span> in responses to {{question}}:</h4>
{% set ng = get_kwic(ana_q(question)[2], ngic)[1] %}
{% set mykey = ngic %}

{% elif '+' in ngic %} <!-- unused at present - work out how to represent bigram in wordtree -->

<h4>Visualisation for bigram <span class="text-success">{{' '.join(ngic.split('+'))}}</span> in responses to {{question}}:</h4>
{% set ng = get_bgic(ana_q(question)[2], ngic)[1] %}
{% set mykey = ' '.join(ngic.split('+')) %}

 {% endif %}

<h5>{{sum_q(question)[0]}}</h5>
 
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {packages:['wordtree']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = google.visualization.arrayToDataTable({{ng|tojson}}
          
        );

        var options = {
          wordtree: {
            format: 'implicit',
            type: 'double',
            word: {{mykey|tojson}}
          }
        };

        var chart = new google.visualization.WordTree(document.getElementById('wordtree_basic'));
        chart.draw(data, options);
      }
    </script>

    <div id="wordtree_basic" style="width: 900px; height: 500px;"></div>      
      
</div> <!-- end container -->


{% endblock %}

